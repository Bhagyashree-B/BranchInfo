<!doctype html>  
<html>  
<head></head>  
<body>

<a href='#' onclick='downloadCSV({ filename: "stock-data.csv" });'>Download CSV</a>

<script type="text/javascript">  
    var stockData = [
        {
            Symbol: "AAPL",
            Company: "Apple Inc.",
            Price: [{
            abc : "asjdaklsjd",
            pqr : "ashakjf"
            }]
        },
        {
            Symbol: "INTC",
            Company: "Intel Corporation",
            Price: [{
            abc : "asjdadn",
            pqr : "asdaksd"
            }]
        },
        {
            Symbol: "GOOG",
            Company: "Google Inc",
            Price: [{
            abc : "asdjas",
            pqr : "askjdkla"
            }]
        },
    ];

    function convertArrayOfObjectsToCSV(args) {
        var result, ctr, keys, columnDelimiter, lineDelimiter, data;

        data = args.data || null;
        if (data == null || !data.length) {
            return null;
        }

        columnDelimiter = args.columnDelimiter || ',';
        lineDelimiter = args.lineDelimiter || '\n';

        keys = Object.keys(data[0]);

        result = '';
        result += keys.join(columnDelimiter);
        result += lineDelimiter;

        data.forEach(function(item) {
            ctr = 0;
            keys.forEach(function(key) {
                if (ctr > 0) 
                result += columnDelimiter;               
                    
                  var parse_json =typeof item[key] === 'object'
                  
                  if(parse_json == true)
                  {
                   item[key].forEach(function(subItem){
                   
                     console.log("subItem ====>>>>>> "+ "abc : " + subItem.abc + "\n " + "pqr :" + subItem.pqr );
                                        result += "abc : " + subItem.abc + " " + "pqr : " + subItem.pqr;
                   });
                   
                  }else{
                  console.log("In ELSE "+ item[key]);
                  result += item[key];
                  ctr++;
                  }
                    
                
            });
            result += lineDelimiter;
        });
console.log("RESULT ====> " + result );
        return result;
        
    }

    function downloadCSV(args) {
        var data, filename, link;

        var csv = convertArrayOfObjectsToCSV({
            data: stockData
        });
        if (csv == null) return;

        filename = args.filename || 'export.csv';

        if (!csv.match(/^data:text\/csv/i)) {
            csv = 'data:text/csv;charset=utf-8,' + csv;
        }
        data = encodeURI(csv);

        link = document.createElement('a');
        link.setAttribute('href', data);
        link.setAttribute('download', filename);
        link.click();
    }
</script>  
</body>  
</html>  

